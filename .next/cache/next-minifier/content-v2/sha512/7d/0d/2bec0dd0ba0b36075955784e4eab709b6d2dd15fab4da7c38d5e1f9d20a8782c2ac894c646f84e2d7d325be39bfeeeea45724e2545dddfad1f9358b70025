{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{AveT:function(e,t,r){\"use strict\";var n=r(\"KQm4\"),a=r(\"rePB\"),o=r(\"q1tI\"),l=r.n(o),c=(r(\"YFqc\"),r(\"nOHt\")),s=r(\"a6RD\"),i=r.n(s),u=r(\"iuBY\"),m=r(\"abxw\"),b=r(\"SMr6\"),f=r(\"zycw\"),d=(r(\"91UR\"),r(\"//g3\")),p=l.a.createElement;function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v,O=i()((function(){return Promise.all([r.e(0),r.e(8),r.e(9)]).then(r.t.bind(null,\"rmP6\",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return[\"rmP6\"]},modules:[\"react-quill\"]}});if(localStorage.getItem(\"user\")){var j=JSON.parse(localStorage.getItem(\"user\"));v=j.role}t.a=Object(c.withRouter)((function(e){var t=e.router,r=Object(o.useState)([]),l=r[0],c=r[1],s=Object(o.useState)([]),i=s[0],g=s[1],j=Object(o.useState)([]),y=j[0],N=j[1],w=Object(o.useState)([]),P=w[0],S=w[1],x=Object(o.useState)(!!localStorage.getItem(\"blog\")&&JSON.parse(localStorage.getItem(\"blog\"))),k=x[0],D=x[1],E=Object(o.useState)({error:\"\",sizeError:\"\",success:\"\",formData:\"\",title:\"\",hidePublishButton:!1}),C=E[0],I=E[1],Y=C.error,_=(C.sizeError,C.success),B=C.formData,T=C.title,q=(C.hidePublishButton,Object(u.c)(\"token\"));Object(o.useEffect)((function(){I(h(h({},C),{},{formData:new FormData})),Z(),z()}),[t]);var Z=function(){Object(m.b)(q).then((function(e){e.json().then((function(e){console.log(e.payload),e.error?I(h(h({},C),{},{error:e.error})):c(e.payload)}))}))},z=function(){Object(b.b)(q).then((function(e){e.json().then((function(e){e.error?I(h(h({},C),{},{error:e.error})):g(e.payload)}))}))},F=function(e){return function(t){var r,n=\"photo\"===e?t.target.files[0]:t.target.value;B.set(e,n),I(h(h({},C),{},(r={},Object(a.a)(r,e,n),Object(a.a)(r,\"formData\",B),Object(a.a)(r,\"error\",\"\"),r)))}},J=function(e){D(e),B.set(\"body\",e),localStorage.setItem(\"blog\",JSON.stringify(e))},A=function(e){return function(){I(h(h({},C),{},{error:\"\"}));var t=y.indexOf(e),r=Object(n.a)(y);-1===t?r.push(e):r.splice(t,1),console.log(r),N(r),B.set(\"categories\",r)}},H=function(e){return function(){I(h(h({},C),{},{error:\"\"}));var t=y.indexOf(e),r=Object(n.a)(P);-1===t?r.push(e):r.splice(t,1),console.log(r),S(r),B.set(\"tags\",r)}};return p(\"div\",{className:\"container-fluid pb-5\"},p(\"div\",{className:\"row\"},p(\"div\",{className:\"col-md-8\"},p(\"form\",{onSubmit:function(e){e.preventDefault(),Object(f.a)(B,q).then((function(e){console.log(e),e.error?I(h(h({},C),{},{error:e.error})):(console.log(v),1==v?(I(h(h({},C),{},{title:\"\",error:\"\",success:'A new blog titled \"'.concat(e.title,'\" is created')})),D(\"\"),c([]),g([])):0==v&&(I(h(h({},C),{},{title:\"\",error:\"\",success:'Blog titled \"'.concat(e.title,'\" is created and has been submitted for review to the admin. Your blog will be published by the admin after reviewing it!')})),D(\"\"),c([]),g([])))}))}},p(\"div\",{className:\"form-group\"},p(\"label\",{className:\"text-muted\"},\"Title\"),p(\"input\",{type:\"text\",className:\"form-control\",value:T,onChange:F(\"title\")})),p(\"div\",{className:\"form-group\"},p(O,{modules:d.b,formats:d.a,value:k,placeholder:\"Write something amazing...\",onChange:J})),p(\"div\",null,p(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\"Publish\"))),p(\"div\",{className:\"pt-3\"},p(\"div\",{className:\"alert alert-danger\",style:{display:Y?\"\":\"none\"}},Y),p(\"div\",{className:\"alert alert-success\",style:{display:_?\"\":\"none\"}},_))),p(\"div\",{className:\"col-md-4\"},p(\"div\",null,p(\"div\",{className:\"form-group pb-2\"},p(\"h5\",null,\"Featured image\"),p(\"hr\",null),p(\"small\",{className:\"text-muted\"},\"Max size: 1mb\"),p(\"br\",null),p(\"label\",{className:\"btn btn-outline-info\"},\"Upload featured image\",p(\"input\",{onChange:F(\"photo\"),type:\"file\",accept:\"image/*\",hidden:!0})))),p(\"div\",null,p(\"h5\",null,\"Categories\"),p(\"hr\",null),p(\"ul\",{style:{maxHeight:\"200px\",overflowY:\"scroll\"}},l&&l.map((function(e,t){return p(\"li\",{key:t,className:\"list-unstyled\"},p(\"input\",{onChange:A(e._id),type:\"checkbox\",className:\"mr-2\"}),p(\"label\",{className:\"form-check-label\"},e.name))})))),p(\"div\",null,p(\"h5\",null,\"Tags\"),p(\"hr\",null),p(\"ul\",{style:{maxHeight:\"200px\",overflowY:\"scroll\"}},i&&i.map((function(e,t){return p(\"li\",{key:t,className:\"list-unstyled\"},p(\"input\",{onChange:H(e._id),type:\"checkbox\",className:\"mr-2\"}),p(\"label\",{className:\"form-check-label\"},e.name))})))))))}))},MUZa:function(e,t,r){\"use strict\";r.r(t);var n=r(\"q1tI\"),a=r.n(n),o=r(\"5Yp1\"),l=r(\"vC6e\"),c=(r(\"YFqc\"),r(\"AveT\")),s=(r(\"TIwn\"),a.a.createElement);t.default=function(){return s(\"div\",{className:\"content1\"},s(o.a,null,s(l.a,null,s(\"div\",{className:\"container-fluid\"},s(\"div\",{className:\"row\"},s(\"div\",{className:\"col-md-12 pt-5 pb-5\"},s(\"h2\",null,\"Create A New Blog\")),s(\"div\",{className:\"col-md-12\"},s(c.a,null)))))))}},Pmoa:function(e,t){e.exports=next},eZ7Z:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/admin/crud/blog\",function(){return r(\"MUZa\")}])},vC6e:function(e,t,r){\"use strict\";var n=r(\"q1tI\"),a=r.n(n),o=r(\"nOHt\"),l=r.n(o),c=r(\"iuBY\"),s=a.a.createElement;t.a=function(e){var t=e.children;return Object(n.useEffect)((function(){Object(c.e)()?1!=Object(c.e)().role&&l.a.push(\"/\"):l.a.push(\"/signin\")}),[]),s(a.a.Fragment,null,t)}}},[[\"eZ7Z\",1,0,2,3,7,6]]]);","extractedComments":[]}