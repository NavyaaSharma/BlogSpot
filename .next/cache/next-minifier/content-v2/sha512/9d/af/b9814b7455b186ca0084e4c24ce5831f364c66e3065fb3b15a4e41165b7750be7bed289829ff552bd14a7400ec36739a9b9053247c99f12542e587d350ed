{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{AhMt:function(e,t,n){\"use strict\";var r=n(\"KQm4\"),a=n(\"rePB\"),c=n(\"q1tI\"),o=n.n(c),l=(n(\"YFqc\"),n(\"nOHt\")),s=n.n(l),i=n(\"a6RD\"),u=n.n(i),m=n(\"iuBY\"),f=n(\"abxw\"),b=n(\"SMr6\"),d=n(\"zycw\"),p=(n(\"91UR\"),n(\"//g3\")),g=n(\"obyI\"),h=o.a.createElement;function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=u()((function(){return Promise.all([n.e(0),n.e(8),n.e(9)]).then(n.t.bind(null,\"rmP6\",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return[\"rmP6\"]},modules:[\"react-quill\"]}});t.a=Object(l.withRouter)((function(e){var t,n=e.router,o=Object(c.useState)(\"\"),l=o[0],i=o[1],u=Object(c.useState)([]),O=u[0],y=u[1],w=Object(c.useState)([]),N=w[0],x=w[1],P=Object(c.useState)([]),k=P[0],_=P[1],D=Object(c.useState)([]),q=D[0],S=D[1],E=Object(c.useState)((t={title:\"\",error:\"\",success:\"\",formData:\"\"},Object(a.a)(t,\"title\",\"\"),Object(a.a)(t,\"body\",\"\"),t)),C=E[0],Y=E[1],M=C.error,T=C.success,F=C.formData,B=C.title,H=Object(m.c)(\"token\");Object(c.useEffect)((function(){Y(v(v({},C),{},{formData:new FormData})),I(),G(),R()}),[n]);var I=function(){n.query.slug&&Object(d.h)(n.query.slug).then((function(e){console.log(e.categories[0]),e.error?console.log(e.error):(Y(v(v({},C),{},{title:e.title})),i(e.body),console.log(e.categories.length),U(e.categories),z(e.tags))}))},U=function(e){var t=[];e.map((function(e,n){t.push(e._id)})),_(t)},z=function(e){var t=[];e.map((function(e,n){t.push(e._id)})),S(t)},G=function(){Object(f.b)(H).then((function(e){e.json().then((function(e){e.error?Y(v(v({},C),{},{error:e.error})):y(e.payload)}))}))},R=function(){Object(b.b)(H).then((function(e){e.json().then((function(e){e.error?Y(v(v({},C),{},{error:e.error})):x(e.payload)}))}))},A=function(e){return function(){Y(v(v({},C),{},{error:\"\"}));var t=k.indexOf(e),n=Object(r.a)(k);-1===t?n.push(e):n.splice(t,1),console.log(n),_(n),F.set(\"categories\",n)}},J=function(e){return function(){Y(v(v({},C),{},{error:\"\"}));var t=q.indexOf(e),n=Object(r.a)(q);-1===t?n.push(e):n.splice(t,1),console.log(n),S(n),F.set(\"tags\",n)}},X=function(e){return-1!==k.indexOf(e)},K=function(e){return-1!==q.indexOf(e)},Q=function(e){return function(t){var n,r=\"photo\"===e?t.target.files[0]:t.target.value;F.set(e,r),Y(v(v({},C),{},(n={},Object(a.a)(n,e,r),Object(a.a)(n,\"formData\",F),Object(a.a)(n,\"error\",\"\"),n)))}},W=function(e){i(e),F.set(\"body\",e)};return h(\"div\",{className:\"container-fluid pb-5\"},h(\"div\",{className:\"row\"},h(\"div\",{className:\"col-md-8\"},h(\"form\",{onSubmit:function(e){e.preventDefault(),Object(d.i)(F,H,n.query.slug).then((function(e){e.error?Y(v(v({},C),{},{error:e.error})):(Y(v(v({},C),{},{title:\"\",success:'Blog titled \"'.concat(e.title,'\" is successfully updated')})),Object(m.e)()&&1===Object(m.e)().role?s.a.replace(\"/admin\"):Object(m.e)()&&0===Object(m.e)().role&&s.a.replace(\"/user\"))}))}},h(\"div\",{className:\"form-group\"},h(\"label\",{className:\"text-muted\"},\"Title\"),h(\"input\",{type:\"text\",className:\"form-control\",value:B,onChange:Q(\"title\")})),h(\"div\",{className:\"form-group\"},h(j,{modules:p.b,formats:p.a,value:l,placeholder:\"Write something amazing...\",onChange:W})),h(\"div\",null,h(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\"Update\"))),h(\"div\",{className:\"pt-3\"},h(\"div\",{className:\"alert alert-success\",style:{display:T?\"\":\"none\"}},T),h(\"div\",{className:\"alert alert-danger\",style:{display:M?\"\":\"none\"}},M)),l&&h(\"img\",{src:\"\".concat(g.a,\"/blog/photo/\").concat(n.query.slug),alt:B,style:{width:\"100%\"}})),h(\"div\",{className:\"col-md-4\"},h(\"div\",null,h(\"div\",{className:\"form-group pb-2\"},h(\"h5\",null,\"Featured image\"),h(\"hr\",null),h(\"small\",{className:\"text-muted\"},\"Max size: 1mb\"),h(\"br\",null),h(\"label\",{className:\"btn btn-outline-info\"},\"Upload featured image\",h(\"input\",{onChange:Q(\"photo\"),type:\"file\",accept:\"image/*\",hidden:!0})))),h(\"div\",null,h(\"h5\",null,\"Categories\"),h(\"hr\",null),h(\"ul\",{style:{maxHeight:\"200px\",overflowY:\"scroll\"}},(console.log(O),O&&O.map((function(e,t){return h(\"li\",{key:t,className:\"list-unstyled\"},h(\"input\",{onChange:A(e._id),checked:X(e._id),type:\"checkbox\",className:\"mr-2\"}),h(\"label\",{className:\"form-check-label\"},e.name))}))))),h(\"div\",null,h(\"h5\",null,\"Tags\"),h(\"hr\",null),h(\"ul\",{style:{maxHeight:\"200px\",overflowY:\"scroll\"}},N&&N.map((function(e,t){return h(\"li\",{key:t,className:\"list-unstyled\"},h(\"input\",{onChange:J(e._id),checked:K(e._id),type:\"checkbox\",className:\"mr-2\"}),h(\"label\",{className:\"form-check-label\"},e.name))})))))))}))},Pmoa:function(e,t){e.exports=next},iT7G:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/admin/crud/[slug]\",function(){return n(\"we8M\")}])},vC6e:function(e,t,n){\"use strict\";var r=n(\"q1tI\"),a=n.n(r),c=n(\"nOHt\"),o=n.n(c),l=n(\"iuBY\"),s=a.a.createElement;t.a=function(e){var t=e.children;return Object(r.useEffect)((function(){Object(l.e)()?1!=Object(l.e)().role&&o.a.push(\"/\"):o.a.push(\"/signin\")}),[]),s(a.a.Fragment,null,t)}},we8M:function(e,t,n){\"use strict\";n.r(t);var r=n(\"q1tI\"),a=n.n(r),c=n(\"5Yp1\"),o=n(\"vC6e\"),l=n(\"AhMt\"),s=(n(\"YFqc\"),a.a.createElement);t.default=function(){return s(c.a,null,s(o.a,null,s(\"div\",{className:\"content\"},s(\"div\",{className:\"container-fluid\"},s(\"div\",{className:\"row\"},s(\"div\",{className:\"col-md-12 pt-5 pb-5\"},s(\"h2\",null,\"Update blog\")),s(\"div\",{className:\"col-md-12\"},s(l.a,null)))))))}}},[[\"iT7G\",1,0,2,3,7,6]]]);","extractedComments":[]}