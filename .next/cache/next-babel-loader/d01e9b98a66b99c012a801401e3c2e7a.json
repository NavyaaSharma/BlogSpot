{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport { withRouter } from 'next/router';\nimport Layout from '../../components/Layout';\nimport { useState } from 'react';\nimport { listBlogsWithCategoriesAndTags } from '../../actions/blog';\nimport Card from '../../components/blog/Card';\nimport { API, DOMAIN, APP_NAME, FB_APP_ID } from '../../config';\nimport '../../static/css/style.css';\nimport Search from '../../components/blog/Search';\n\nvar Blogs = function Blogs(_ref) {\n  var blogs = _ref.blogs,\n      categories = _ref.categories,\n      tags = _ref.tags,\n      totalBlogs = _ref.totalBlogs,\n      blogsLimit = _ref.blogsLimit,\n      blogSkip = _ref.blogSkip,\n      router = _ref.router;\n\n  var head = function head() {\n    return __jsx(Head, null, __jsx(\"title\", null, \"Blogs | \", APP_NAME), __jsx(\"meta\", {\n      name: \"description\",\n      content: \"Programming blogs and tutorials on react node next vue php laravel and web developoment\"\n    }), __jsx(\"link\", {\n      rel: \"canonical\",\n      href: \"\".concat(DOMAIN).concat(router.pathname)\n    }), __jsx(\"meta\", {\n      property: \"og:title\",\n      content: \"Latest web developoment tutorials | \".concat(APP_NAME)\n    }), __jsx(\"meta\", {\n      property: \"og:description\",\n      content: \"Programming blogs and tutorials on react node next vue php laravel and web developoment\"\n    }), __jsx(\"meta\", {\n      property: \"og:type\",\n      content: \"webiste\"\n    }), __jsx(\"meta\", {\n      property: \"og:url\",\n      content: \"\".concat(DOMAIN).concat(router.pathname)\n    }), __jsx(\"meta\", {\n      property: \"og:site_name\",\n      content: \"\".concat(APP_NAME)\n    }), __jsx(\"meta\", {\n      property: \"og:image\",\n      content: \"\".concat(DOMAIN, \"/static/images/seoblog.jpg\")\n    }), __jsx(\"meta\", {\n      property: \"og:image:secure_url\",\n      ccontent: \"\".concat(DOMAIN, \"/static/images/seoblog.jpg\")\n    }), __jsx(\"meta\", {\n      property: \"og:image:type\",\n      content: \"image/jpg\"\n    }), __jsx(\"meta\", {\n      property: \"fb:app_id\",\n      content: \"\".concat(FB_APP_ID)\n    }));\n  };\n\n  var _useState = useState(blogsLimit),\n      limit = _useState[0],\n      setLimit = _useState[1];\n\n  var _useState2 = useState(0),\n      skip = _useState2[0],\n      setSkip = _useState2[1];\n\n  var _useState3 = useState(totalBlogs),\n      size = _useState3[0],\n      setSize = _useState3[1];\n\n  var _useState4 = useState([]),\n      loadedBlogs = _useState4[0],\n      setLoadedBlogs = _useState4[1];\n\n  var loadMore = function loadMore() {\n    var toSkip = skip + limit;\n    listBlogsWithCategoriesAndTags(toSkip, limit).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setLoadedBlogs([].concat(_toConsumableArray(loadedBlogs), _toConsumableArray(data.payload.blogs)));\n        setSize(data.size);\n        setSkip(toSkip);\n      }\n    });\n  };\n\n  var loadMoreButton = function loadMoreButton() {\n    return size > 0 && size >= limit && __jsx(\"button\", {\n      onClick: loadMore,\n      className: \"btn btn-outline-primary btn-lg\"\n    }, \"Load More\");\n  };\n\n  var showAllBlogs = function showAllBlogs() {\n    return blogs.map(function (blog, i) {\n      // ()\n      return __jsx(\"article\", {\n        key: i\n      }, __jsx(Card, {\n        blog: blog\n      }), __jsx(\"hr\", null));\n    });\n  };\n\n  var showAllCategories = function showAllCategories() {\n    return categories.map(function (c, i) {\n      return __jsx(Link, {\n        href: \"/categories/\".concat(c.slug),\n        key: i\n      }, __jsx(\"a\", {\n        className: \"btn btn-primary mr-1 ml-1 mt-3\"\n      }, c.name));\n    });\n  };\n\n  var showAllTags = function showAllTags() {\n    return tags.map(function (t, i) {\n      return __jsx(Link, {\n        href: \"/tags/\".concat(t.slug),\n        key: i\n      }, __jsx(\"a\", {\n        className: \"btn btn-outline-primary mr-1 ml-1 mt-3\"\n      }, t.name));\n    });\n  };\n\n  var showLoadedBlogs = function showLoadedBlogs() {\n    return loadedBlogs.map(function (blog, i) {\n      return __jsx(\"article\", {\n        key: i\n      }, __jsx(Card, {\n        blog: blog\n      }));\n    });\n  };\n\n  return __jsx(React.Fragment, null, head(), __jsx(\"div\", {\n    className: \"content\"\n  }), __jsx(Search, null), __jsx(Layout, null, __jsx(\"main\", null, __jsx(\"div\", {\n    className: \"container-fluid\"\n  }, __jsx(\"header\", null, __jsx(\"div\", {\n    className: \"col-md-12 pt-3 pb-3\"\n  }, __jsx(\"h1\", {\n    className: \"display-4 font-weight-bold text-center\"\n  }, \"Start exploring blogs of your interest!\")), __jsx(\"section\", null, __jsx(\"div\", {\n    className: \"pb-5 text-center\"\n  }, showAllCategories(), __jsx(\"br\", null), showAllTags())))), __jsx(\"div\", {\n    className: \"container-fluid pl-5 pr-5\"\n  }, showAllBlogs()), __jsx(\"div\", {\n    className: \"container-fluid pl-5 pr-5\"\n  }, showLoadedBlogs()), __jsx(\"div\", {\n    className: \"text-center pt-5 pb-5\"\n  }, loadMoreButton()))));\n};\n\nBlogs.getInitialProps = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n  var skip, limit, data;\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          skip = 0;\n          limit = 2;\n          _context.next = 4;\n          return listBlogsWithCategoriesAndTags(skip, limit);\n\n        case 4:\n          data = _context.sent;\n          console.log(data);\n          return _context.abrupt(\"return\", {\n            blogs: data.payload.blogs,\n            categories: data.categories,\n            tags: data.tags,\n            totalBlogs: data.size,\n            blogsLimit: limit,\n            blogSkip: skip\n          });\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n}));\nexport default withRouter(Blogs);","map":null,"metadata":{},"sourceType":"module"}