(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"0iGR":function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),c=n("5Yp1"),o=n("yxxe"),l=n("AhMt"),s=(n("YFqc"),a.a.createElement);t.default=function(){return s(c.a,null,s(o.a,null,s("div",{className:"container-fluid"},s("div",{className:"row"},s("div",{className:"col-md-12 pt-5 pb-5"},s("h2",null,"Update blog")),s("div",{className:"col-md-12"},s(l.a,null))))))}},AhMt:function(e,t,n){"use strict";var r=n("KQm4"),a=n("rePB"),c=n("q1tI"),o=n.n(c),l=(n("YFqc"),n("nOHt")),s=n.n(l),i=n("a6RD"),u=n.n(i),m=n("iuBY"),f=n("abxw"),b=n("SMr6"),d=n("zycw"),p=(n("91UR"),n("//g3")),g=n("obyI"),h=o.a.createElement;function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=u()((function(){return Promise.all([n.e(0),n.e(8),n.e(9)]).then(n.t.bind(null,"rmP6",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return["rmP6"]},modules:["react-quill"]}});t.a=Object(l.withRouter)((function(e){var t,n=e.router,o=Object(c.useState)(""),l=o[0],i=o[1],u=Object(c.useState)([]),O=u[0],v=u[1],N=Object(c.useState)([]),w=N[0],x=N[1],P=Object(c.useState)([]),k=P[0],S=P[1],_=Object(c.useState)([]),D=_[0],q=_[1],E=Object(c.useState)((t={title:"",error:"",success:"",formData:""},Object(a.a)(t,"title",""),Object(a.a)(t,"body",""),t)),R=E[0],Y=E[1],C=R.error,F=R.success,B=R.formData,H=R.title,I=Object(m.c)("token");Object(c.useEffect)((function(){Y(y(y({},R),{},{formData:new FormData})),M(),z(),G()}),[n]);var M=function(){n.query.slug&&Object(d.h)(n.query.slug).then((function(e){console.log(e.categories[0]),e.error?console.log(e.error):(Y(y(y({},R),{},{title:e.title})),i(e.body),console.log(e.categories.length),T(e.categories),U(e.tags))}))},T=function(e){var t=[];e.map((function(e,n){t.push(e._id)})),S(t)},U=function(e){var t=[];e.map((function(e,n){t.push(e._id)})),q(t)},z=function(){Object(f.b)(I).then((function(e){e.json().then((function(e){e.error?Y(y(y({},R),{},{error:e.error})):v(e.payload)}))}))},G=function(){Object(b.b)(I).then((function(e){e.json().then((function(e){e.error?Y(y(y({},R),{},{error:e.error})):x(e.payload)}))}))},A=function(e){return function(){Y(y(y({},R),{},{error:""}));var t=k.indexOf(e),n=Object(r.a)(k);-1===t?n.push(e):n.splice(t,1),console.log(n),S(n),B.set("categories",n)}},J=function(e){return function(){Y(y(y({},R),{},{error:""}));var t=D.indexOf(e),n=Object(r.a)(D);-1===t?n.push(e):n.splice(t,1),console.log(n),q(n),B.set("tags",n)}},L=function(e){return-1!==k.indexOf(e)},X=function(e){return-1!==D.indexOf(e)},K=function(e){return function(t){var n,r="photo"===e?t.target.files[0]:t.target.value;B.set(e,r),Y(y(y({},R),{},(n={},Object(a.a)(n,e,r),Object(a.a)(n,"formData",B),Object(a.a)(n,"error",""),n)))}},Q=function(e){i(e),B.set("body",e)};return h("div",{className:"container-fluid pb-5"},h("div",{className:"row"},h("div",{className:"col-md-8"},h("form",{onSubmit:function(e){e.preventDefault(),Object(d.i)(B,I,n.query.slug).then((function(e){e.error?Y(y(y({},R),{},{error:e.error})):(Y(y(y({},R),{},{title:"",success:'Blog titled "'.concat(e.title,'" is successfully updated')})),Object(m.e)()&&1===Object(m.e)().role?s.a.replace("/admin"):Object(m.e)()&&0===Object(m.e)().role&&s.a.replace("/user"))}))}},h("div",{className:"form-group"},h("label",{className:"text-muted"},"Title"),h("input",{type:"text",className:"form-control",value:H,onChange:K("title")})),h("div",{className:"form-group"},h(j,{modules:p.b,formats:p.a,value:l,placeholder:"Write something amazing...",onChange:Q})),h("div",null,h("button",{type:"submit",className:"btn btn-primary"},"Update"))),h("div",{className:"pt-3"},h("div",{className:"alert alert-success",style:{display:F?"":"none"}},F),h("div",{className:"alert alert-danger",style:{display:C?"":"none"}},C)),l&&h("img",{src:"".concat(g.a,"/blog/photo/").concat(n.query.slug),alt:H,style:{width:"100%"}})),h("div",{className:"col-md-4"},h("div",null,h("div",{className:"form-group pb-2"},h("h5",null,"Featured image"),h("hr",null),h("small",{className:"text-muted"},"Max size: 1mb"),h("br",null),h("label",{className:"btn btn-outline-info"},"Upload featured image",h("input",{onChange:K("photo"),type:"file",accept:"image/*",hidden:!0})))),h("div",null,h("h5",null,"Categories"),h("hr",null),h("ul",{style:{maxHeight:"200px",overflowY:"scroll"}},(console.log(O),O&&O.map((function(e,t){return h("li",{key:t,className:"list-unstyled"},h("input",{onChange:A(e._id),checked:L(e._id),type:"checkbox",className:"mr-2"}),h("label",{className:"form-check-label"},e.name))}))))),h("div",null,h("h5",null,"Tags"),h("hr",null),h("ul",{style:{maxHeight:"200px",overflowY:"scroll"}},w&&w.map((function(e,t){return h("li",{key:t,className:"list-unstyled"},h("input",{onChange:J(e._id),checked:X(e._id),type:"checkbox",className:"mr-2"}),h("label",{className:"form-check-label"},e.name))})))))))}))},Pmoa:function(e,t){e.exports=next},SmLR:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/crud/[slug]",function(){return n("0iGR")}])},yxxe:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),c=n("nOHt"),o=n.n(c),l=n("iuBY"),s=a.a.createElement;t.a=function(e){var t=e.children;return Object(r.useEffect)((function(){Object(l.e)()||o.a.push("/signin")}),[]),s(a.a.Fragment,null,t)}}},[["SmLR",1,0,2,3,7,6]]]);